{"version":3,"names":["defaultProps","style","textStyle","onTimes","_seconds","onPause","onEnd","TimerComponent","React","forwardRef","props","ref","initialSeconds","fontFamily","autoStart","formatTime","interval","useRef","hours","minute","seconds","currentSeconds","key","setKey","useState","Math","random","useImperativeHandle","start","pause","resume","stop","timer","useCallback","current","BackgroundTimer","setInterval","initTime","iSeconds","times","init","clear","clearInterval","useEffect","font","renderTimer","styles","text","toString","length"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\n/* eslint-disable no-bitwise */\nimport React, {\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { View, Text } from 'react-native';\nimport { styles } from './styles';\nimport type { TimerProps } from './model';\nimport BackgroundTimer from 'react-native-background-timer';\n\nconst defaultProps = {\n  style: {},\n  textStyle: {},\n  onTimes: (_seconds: number) => {},\n  onPause: (_seconds: number) => {},\n  onEnd: (_seconds: number) => {},\n};\n\nconst TimerComponent = React.forwardRef<any, TimerProps>((props, ref) => {\n  const {\n    initialSeconds = 0,\n    style,\n    textStyle,\n    fontFamily,\n    autoStart = false,\n    formatTime = 'hh:mm:ss',\n    onEnd,\n    onTimes,\n    onPause,\n  } = props;\n\n  const interval = useRef(0);\n  const hours = useRef(0);\n  const minute = useRef(0);\n  const seconds = useRef(0);\n  const currentSeconds = useRef(0);\n\n  const [key, setKey] = useState(Math.random());\n\n  useImperativeHandle(ref, () => {\n    return { start, pause, resume, stop };\n  });\n\n  const timer = useCallback(() => {\n    interval.current = BackgroundTimer.setInterval(() => {\n      currentSeconds.current = currentSeconds.current + 1;\n      if (seconds.current < 60) {\n        seconds.current = seconds.current + 1;\n      } else {\n        seconds.current = 0;\n        minute.current = minute.current + 1;\n      }\n      if (minute.current === 60) {\n        minute.current = 0;\n        hours.current = hours.current + 1;\n      }\n      if (onTimes) {\n        onTimes(currentSeconds.current);\n      }\n      setKey(Math.random());\n    }, 1000);\n  }, []);\n\n  const initTime = useCallback((iSeconds: number) => {\n    if (iSeconds >= 3600) {\n      hours.current = ~~(iSeconds / 3600);\n      const times = iSeconds % 3600;\n      initTime(times);\n    } else {\n      if (iSeconds >= 60) {\n        minute.current = ~~(iSeconds / 60);\n        const times = iSeconds % 60;\n        initTime(times);\n      } else {\n        seconds.current = iSeconds;\n      }\n    }\n  }, []);\n\n  const init = useCallback(() => {\n    currentSeconds.current = 0;\n    hours.current = 0;\n    minute.current = 0;\n    seconds.current = 0;\n\n    if (initialSeconds > 0) {\n      initTime(initialSeconds);\n    }\n\n    setKey(Math.random());\n  }, [initialSeconds]);\n\n  const start = useCallback(() => {\n    init();\n\n    if (!interval.current) {\n      timer();\n    }\n  }, []);\n\n  const pause = useCallback(() => {\n    clear();\n    if (onPause) {\n      onPause(currentSeconds.current);\n    }\n  }, []);\n\n  const resume = () => {\n    if (!interval.current) {\n      timer();\n    }\n  };\n\n  const stop = () => {\n    if (onEnd) {\n      onEnd(currentSeconds.current);\n    }\n\n    init();\n    setKey(Math.random());\n    clear();\n  };\n\n  const clear = () => {\n    if (interval.current) {\n      BackgroundTimer.clearInterval(interval.current);\n      interval.current = 0;\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, [initialSeconds]);\n\n  useEffect(() => {\n    return () => {\n      pause();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (autoStart) {\n      start();\n    }\n  }, [autoStart]);\n\n  const font = () => {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily,\n      };\n    } else {\n      return {};\n    }\n  };\n\n  const renderTimer = () => {\n    if (formatTime === 'hh:mm:ss') {\n      if (hours.current > 0) {\n        return (\n          <Text style={[styles.text, textStyle, font()]}>{`${hours.current}:${\n            minute.current.toString().length === 1 ? '0' : ''\n          }${minute.current}:${\n            seconds.current.toString().length === 1 ? '0' : ''\n          }${seconds.current}`}</Text>\n        );\n      } else {\n        if (minute.current > 0) {\n          return (\n            <Text style={[styles.text, textStyle, font()]}>{`${\n              minute.current\n            }:${seconds.current.toString().length === 1 ? '0' : ''}${\n              seconds.current\n            }`}</Text>\n          );\n        } else {\n          return (\n            <Text\n              style={[styles.text, textStyle, font()]}\n            >{`${seconds.current}`}</Text>\n          );\n        }\n      }\n    } else {\n      return (\n        <Text\n          style={[styles.text, textStyle, font()]}\n        >{`${currentSeconds.current}`}</Text>\n      );\n    }\n  };\n\n  return (\n    <View style={style} key={key}>\n      {renderTimer()}\n    </View>\n  );\n});\n\nTimerComponent.defaultProps = defaultProps;\n\nexport default TimerComponent;\n"],"mappings":"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"}